<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PSD 固件 &mdash; GDDAQ V20250613 文档</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=9b342a7d"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../_static/translations.js?v=beaddf03"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="ZLE 固件" href="ZLE.html" />
    <link rel="prev" title="PHA 固件" href="PHA.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            GDDAQ
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">简介</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">简介</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">程序安装</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../INSTALL.html">程序安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FIRMWARE.html">固件</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">用户指南</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">图形化指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="Synchronization.html">时间同步和采集</a></li>
<li class="toctree-l1"><a class="reference internal" href="GUI.html">图形交互界面</a></li>
<li class="toctree-l1"><a class="reference internal" href="SCOPE.html">SCOPE 固件</a></li>
<li class="toctree-l1"><a class="reference internal" href="PHA.html">PHA 固件</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">PSD 固件</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">基本参数配置</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">输入信号</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#chgain">参数 ChGain</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inputdelay">参数 InputDelay</a></li>
<li class="toctree-l4"><a class="reference internal" href="#chenable">参数 ChEnable</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wavesource">参数 WaveSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dcoffset">参数 DCOffset</a></li>
<li class="toctree-l4"><a class="reference internal" href="#polarity">参数 Polarity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vgagain">参数 VGAGain</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id3">触发</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#wavetriggersource">参数 WaveTriggerSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="#eventtriggersource">参数 EventTriggerSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="#triggerthr">参数 TriggerThr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#selftriggerwidth">参数 SelfTriggerWidth</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id4">波形</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pretrigger">参数 PreTrigger</a></li>
<li class="toctree-l4"><a class="reference internal" href="#recordlength">参数 RecordLength</a></li>
<li class="toctree-l4"><a class="reference internal" href="#downsampingfactor">参数 DownsampingFactor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#analog0-1">参数 Analog0/1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#digital0-1-2-3">参数 Digital0/1/2/3</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id5">数据记录</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#eventselector">参数 EventSelector</a></li>
<li class="toctree-l4"><a class="reference internal" href="#waveselector">参数 WaveSelector</a></li>
<li class="toctree-l4"><a class="reference internal" href="#energyskimlowdiscriminator">参数 EnergySkimLowDiscriminator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#energyskimhighdiscriminator">参数 EnergySkimHighDiscriminator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wavesaving">参数 WaveSaving</a></li>
<li class="toctree-l4"><a class="reference internal" href="#endatareduction">参数 EnDataReduction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id6">PSD 时间参数</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#smoothingfactor">参数 SmoothingFactor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#triggersmoothing">参数 TriggerSmoothing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#triggerselection">参数 TriggerSelection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cfddelay">参数 CFDDelay</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cfdfraction">参数 CFDFraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#retriggerguard">参数 RetriggerGuard</a></li>
<li class="toctree-l4"><a class="reference internal" href="#triggerhysteresis">参数 TriggerHysteresis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pileupgap">参数 PileupGap</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id7">PSD 能量参数</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#baselineavg">参数 BaselineAvg</a></li>
<li class="toctree-l4"><a class="reference internal" href="#absolutebl">参数 AbsoluteBL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#blguard">参数 BLGuard</a></li>
<li class="toctree-l4"><a class="reference internal" href="#chargesmoothing">参数 ChargeSmoothing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shortgate">参数 ShortGate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#longgate">参数 LongGate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#offsetgate">参数 OffsetGate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#longpedestal">参数 LongPedestal</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shortpedestal">参数 ShortPedestal</a></li>
<li class="toctree-l4"><a class="reference internal" href="#energygain">参数 EnergyGain</a></li>
<li class="toctree-l4"><a class="reference internal" href="#neutronthr">参数 NeutronThr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#eventreject">参数 EventReject</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wavereject">参数 WaveReject</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id8">诊断</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#testpulseperiod">参数 TestPulsePeriod</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testpulsewidth">参数 TestPulseWidth</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testpulselowlevel">参数 TestPulseLowLevel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testpulsehighlevel">参数 TestPulseHighLevel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dacoutmode">参数 DACoutMode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dacoutstaticlevel">参数 DACoutStaticLevel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dacoutchselect">参数 DACoutChSelect</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id9">逻辑参数配置</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id10">运行</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#startsource">参数 StartSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="#globaltriggersource">参数 GlobalTriggerSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enautodisarmacq">参数 EnAutoDisarmAcq</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rundelay">参数 RunDelay</a></li>
<li class="toctree-l4"><a class="reference internal" href="#busyinsource">参数 BusyInSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="#clocksource">参数 ClockSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enclockoutfp">参数 EnClockOutFP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id11">模块前面板</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#trgoutmode">参数 TrgOutMode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gpiomode">参数 GPIOMode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#syncoutmode">参数 SyncOutMode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iolevel">参数 IOlevel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lvdsdirection">参数 LVDSDirection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lvdsmode">参数 LVDSMode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lvdstrgmask">参数 LVDSTrgMask</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lvdsioreg">参数 LVDSIOReg</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id12">反符合</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#channelvetosource">参数 ChannelVetoSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adcvetowidth">参数 ADCVetoWidth</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vetosource">参数 VetoSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vetowidth">参数 VetoWidth</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vetopolarity">参数 VetoPolarity</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#itl">ITL 逻辑</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#itla-bmask">参数 ITLA/BMask</a></li>
<li class="toctree-l4"><a class="reference internal" href="#itla-bpairlogic">参数 ITLA/BPairLogic</a></li>
<li class="toctree-l4"><a class="reference internal" href="#itla-bmainlogic">参数 ITLA/BMainLogic</a></li>
<li class="toctree-l4"><a class="reference internal" href="#itla-bmajoritylev">参数 ITLA/BMajorityLev</a></li>
<li class="toctree-l4"><a class="reference internal" href="#itla-bgatewidth">参数 ITLA/BGateWidth</a></li>
<li class="toctree-l4"><a class="reference internal" href="#itla-bpolarity">参数 ITLA/BPolarity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#itla-benretrigger">参数 ITLA/BEnRetrigger</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id13">延迟展宽</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#itlconnect">参数 ITLConnect</a></li>
<li class="toctree-l4"><a class="reference internal" href="#channelstriggermask">参数 ChannelsTriggerMask</a></li>
<li class="toctree-l4"><a class="reference internal" href="#coincidencemask">参数 CoincidenceMask</a></li>
<li class="toctree-l4"><a class="reference internal" href="#anticoincidencemask">参数 AntiCoincidenceMask</a></li>
<li class="toctree-l4"><a class="reference internal" href="#coincidencelength">参数 CoincidenceLength</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ZLE.html">ZLE 固件</a></li>
<li class="toctree-l1"><a class="reference internal" href="OPEN.html">开放 FPGA</a></li>
<li class="toctree-l1"><a class="reference internal" href="UserDPP.html">UserDPP 固件</a></li>
<li class="toctree-l1"><a class="reference internal" href="UserScope.html">UserScope 固件</a></li>
<li class="toctree-l1"><a class="reference internal" href="UDP.html">UDP</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">应用案例</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Example/README.html">应用案例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/HPGe.html">HPGe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/Si.html">Si</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/UserDPP.html">UserDPP 应用</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/LongWaveform.html">超长波形采集</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">数据分析</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Data/README.html">数据分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Data/DecodeAndSort.html">数据解码</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Data/EventBuilder.html">事件组装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Data/DataAnalysis.html">数据分析框架</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">采购建议与实验调试</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ProcurementProposal.html">采购推荐</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ExperimentalDebugging.html">实验调试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Recovery.html">恢复出厂设置</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GDDAQ</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">PSD 固件</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/UsersGuide/PSD.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="psd">
<h1>PSD 固件<a class="headerlink" href="#psd" title="此标题的永久链接"></a></h1>
<section id="id1">
<h2>基本参数配置<a class="headerlink" href="#id1" title="此标题的永久链接"></a></h2>
<section id="id2">
<h3>输入信号<a class="headerlink" href="#id2" title="此标题的永久链接"></a></h3>
<img alt="../_images/psd_basic_input.png" src="../_images/psd_basic_input.png" />
<section id="chgain">
<h4>参数 ChGain<a class="headerlink" href="#chgain" title="此标题的永久链接"></a></h4>
<p>仅限 x2730.</p>
<p>设置可变增益放大器（VGA）的增益。</p>
<p>Unit of Measure: dB</p>
</section>
<section id="inputdelay">
<h4>参数 InputDelay<a class="headerlink" href="#inputdelay" title="此标题的永久链接"></a></h4>
<p>设置输入延迟，单位为采样点。</p>
<p>该值设置每 4 个通道共用一个相同配置。</p>
</section>
<section id="chenable">
<h4>参数 ChEnable<a class="headerlink" href="#chenable" title="此标题的永久链接"></a></h4>
<p>独立设定每个通道是否开启使用。如果通道不启用，它不提供任何数据，同时它的自触发也关闭。</p>
</section>
<section id="wavesource">
<h4>参数 WaveSource<a class="headerlink" href="#wavesource" title="此标题的永久链接"></a></h4>
<p>在正常模式下，采集的波形来源于模拟输入的 A/D 转换产生的 ADC 采样序列。出于测试目的，可以用内部数据生成器替换 ADC 数据。</p>
<ul class="simple">
<li><dl class="simple">
<dt>ADC_DATA</dt><dd><ul>
<li><p>Data from the ADC (normal operating mode)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ADC_TEST_TOGGLE</dt><dd><ul>
<li><p>Toggle between 0x5555 and 0xAAAA (test mode)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ADC_TEST_RAMP</dt><dd><ul>
<li><p>16-bit ramp pattern (test mode)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ADC_TEST_SIN</dt><dd><ul>
<li><p>8-point sine wave test pattern</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ADC_TEST_PRBS</dt><dd><ul>
<li><p>16-bit PRBS generated by a 23-bit PRBS pattern generator (test mode)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Ramp</dt><dd><ul>
<li><p>Data from a ramp generator. It is actually a 16-bit field, where the 6 most significant bits identify the channel and the 10 less significant bits are the samples of a ramp from 0x000 up to 0x3FF (i.e. 0 to 1023). It is so a 10-bit ramp with offset given by “channel*1024”. For channel 0, it is a counter from 0 to 1023; for channel 1, it is a counter from 1024 to 2047, and so on</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>IPE</dt><dd><ul>
<li><p>Not implemented</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SquareWave</dt><dd><ul>
<li><p>Internally generated programmable square wave</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="dcoffset">
<h4>参数 DCOffset<a class="headerlink" href="#dcoffset" title="此标题的永久链接"></a></h4>
<p>对于每个通道，将恒定的 DC 偏移（由 16 位 DAC 控制）添加到模拟输入，以在 ADC 的动态范围内调整信号基线的位置（即模拟输入的“零伏”）。</p>
<p>由于部件的公差，有必要校准偏移 DAC。校准是通过工厂测试完成的，通常不需要重新校准。然而，可以执行新的校准。校准参数存储在板的闪存中，并在通电时加载。每次写入或读取 DCoffset 参数时，内部逻辑会自动应用这些参数。</p>
<p>DCoffset 参数为数字，单位为满刻度的百分比。当 DCoffset为 0 时，输入信号的基线处于 ADC 0。当 DCoffset 为 100 时，输入信号的基线处于 ADC $2^{NBIT}-1$。</p>
</section>
<section id="polarity">
<h4>参数 Polarity<a class="headerlink" href="#polarity" title="此标题的永久链接"></a></h4>
<p>设置输入脉冲的极性。</p>
<ul class="simple">
<li><dl class="simple">
<dt>Positive</dt><dd><ul>
<li><p>Positive polarity</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Negative</dt><dd><ul>
<li><p>Negative polarity</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="vgagain">
<h4>参数 VGAGain<a class="headerlink" href="#vgagain" title="此标题的永久链接"></a></h4>
<p>2745 特有。</p>
<p>以 0.5 dB 为步长设置可变增益放大器（VGA）的增益。参数设置每 16 个通道为一组， 64 通道分为 4 组。最小可设置为 0，最大为 40。</p>
</section>
</section>
<section id="id3">
<h3>触发<a class="headerlink" href="#id3" title="此标题的永久链接"></a></h3>
<img alt="../_images/psd_basic_trigger.png" src="../_images/psd_basic_trigger.png" />
<section id="wavetriggersource">
<h4>参数 WaveTriggerSource<a class="headerlink" href="#wavetriggersource" title="此标题的永久链接"></a></h4>
<p>允许设置波形的触发源。</p>
<p>设置此参数意味着获得包括波形和相关时间戳以及能量信息的事件。</p>
<ul class="simple">
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>No trigger source enabled for the waveform</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Ch64Trigger</dt><dd><ul>
<li><p>One (or more) channel self-trigger can generate a trigger for a waveform</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ChSelfTrigger</dt><dd><ul>
<li><p>Channel self-trigger can generate a trigger for a waveform</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SwTrg</dt><dd><ul>
<li><p>Software Trigger can generate a trigger for a waveform</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ADCOverSaturation</dt><dd><ul>
<li><p>ADC Oversaturation can generate a trigger for a waveform</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ADCUnderSaturation</dt><dd><ul>
<li><p>ADC Undersaturation can generate a trigger for a waveform</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ExternalInhibit</dt><dd><ul>
<li><p>Inhibit can generate a trigger for a waveform</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TRGIN</dt><dd><ul>
<li><p>External TRGIN can generate a trigger for a waveform</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>GlobalTriggerSource</dt><dd><ul>
<li><p>Acquisition Trigger Source (the same of the Scope mode) can generate a trigger for a waveform</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>LVDS</dt><dd><ul>
<li><p>A signal on the LVDS connectors can generate a trigger for a waveform</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLA</dt><dd><ul>
<li><p>Internal Trigger Logic A can generate a trigger for a waveform</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLB</dt><dd><ul>
<li><p>Internal Trigger Logic B can generate a trigger for a waveform</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="eventtriggersource">
<h4>参数 EventTriggerSource<a class="headerlink" href="#eventtriggersource" title="此标题的永久链接"></a></h4>
<p>允许设置时间、能量（T-E）事件的触发源。设置此参数意味着获取包括时间戳和能量信息的事件。</p>
<ul class="simple">
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>No trigger source enabled for the T-E event</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Ch64Trigger</dt><dd><ul>
<li><p>One (or more) channel self-trigger can generate a trigger for a T-E event</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ChSelfTrigger</dt><dd><ul>
<li><p>Channel self-trigger can generate a trigger for a T-E event</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SwTrg</dt><dd><ul>
<li><p>Software Trigger can generate a trigger for a T-E event</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TRGIN</dt><dd><ul>
<li><p>External TRGIN can generate a trigger for a T-E event</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>GlobalTriggerSource</dt><dd><ul>
<li><p>Acquisition Trigger Source (the same of the Scope mode) can generate a trigger for a T-E event</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>LVDS</dt><dd><ul>
<li><p>A signal on the LVDS connectors can generate a trigger for a T-E event</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLA</dt><dd><ul>
<li><p>Internal Trigger Logic A can generate a trigger for a T-E event</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLB</dt><dd><ul>
<li><p>Internal Trigger Logic B can generate a trigger for a T-E event</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="triggerthr">
<h4>参数 TriggerThr<a class="headerlink" href="#triggerthr" title="此标题的永久链接"></a></h4>
<p>相对于滤波之后的波形的设置阈值。</p>
</section>
<section id="selftriggerwidth">
<h4>参数 SelfTriggerWidth<a class="headerlink" href="#selftriggerwidth" title="此标题的永久链接"></a></h4>
<p>产生自触发信号的数字前沿甄别器的输出可以在“线性”模式下使用，这意味着它会持续信号保持在阈值以上（或以下）的时间，从而充当“过阈值”信号，或者可以通过可编程门产生器，使其成为固定宽度的脉冲。门产生器是不可再触发的单稳态，当超过阈值时变高，在编程时间后变低。该参数定义了过阈值的固定宽度脉冲。</p>
</section>
</section>
<section id="id4">
<h3>波形<a class="headerlink" href="#id4" title="此标题的永久链接"></a></h3>
<img alt="../_images/psd_basic_wave.png" src="../_images/psd_basic_wave.png" />
<section id="pretrigger">
<h4>参数 PreTrigger<a class="headerlink" href="#pretrigger" title="此标题的永久链接"></a></h4>
<p>波形中触发器位置之前的时间（即预触发窗口的大小）。</p>
<p>单位为时间，ns</p>
</section>
<section id="recordlength">
<h4>参数 RecordLength<a class="headerlink" href="#recordlength" title="此标题的永久链接"></a></h4>
<p>波形大小（即采集窗口的大小）。波形的实际大小将自动四舍五入到最接近的允许值。通过读回参数可以得到确切的数值。记录时间长度取决于下采样设置。</p>
<p>单位为时间，ns</p>
</section>
<section id="downsampingfactor">
<h4>参数 DownsampingFactor<a class="headerlink" href="#downsampingfactor" title="此标题的永久链接"></a></h4>
<p>波形的下采样因子。</p>
<ul class="simple">
<li><dl class="simple">
<dt>1</dt><dd><ul>
<li><p>x1</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>2</dt><dd><ul>
<li><p>x2</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>4</dt><dd><ul>
<li><p>x4</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>8</dt><dd><ul>
<li><p>x8</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="analog0-1">
<h4>参数 Analog0/1<a class="headerlink" href="#analog0-1" title="此标题的永久链接"></a></h4>
<ul class="simple">
<li><dl class="simple">
<dt>ADCInput</dt><dd><ul>
<li><p>ADC input probe</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ADCInputBaseline</dt><dd><ul>
<li><p>ADC input baseline probe</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>CFDFilter</dt><dd><ul>
<li><p>Constant Fraction Discriminator filter probe</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="digital0-1-2-3">
<h4>参数 Digital0/1/2/3<a class="headerlink" href="#digital0-1-2-3" title="此标题的永久链接"></a></h4>
<ul class="simple">
<li><dl class="simple">
<dt>Trigger</dt><dd><ul>
<li><p>Trigger probe</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>CFDFilterArmed</dt><dd><ul>
<li><p>Constant Fraction Discriminator Filter Armed probe</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ReTriggerGuard</dt><dd><ul>
<li><p>ReTrigger Guard probe</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ADCInputBaselineFreeze</dt><dd><ul>
<li><p>ADC Input Baseline Freeze probe</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ADCInputOverthreshold</dt><dd><ul>
<li><p>ADCInputOverthreshold</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ChargeReady</dt><dd><ul>
<li><p>Charge Ready probe</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>LongGate</dt><dd><ul>
<li><p>Long Gate probe</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>PileUpTrigger</dt><dd><ul>
<li><p>Pile Up Trigger probe</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ShortGate</dt><dd><ul>
<li><p>Short Gate probe</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ChargeOverRange</dt><dd><ul>
<li><p>Integrated Charge Over Range probe</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ADCSaturation</dt><dd><ul>
<li><p>ADC Saturation probe</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ADCInputNegativeOverthreshold</dt><dd><ul>
<li><p>ADC Input Negative Overthreshold probe</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="id5">
<h3>数据记录<a class="headerlink" href="#id5" title="此标题的永久链接"></a></h3>
<img alt="../_images/psd_basic_record.png" src="../_images/psd_basic_record.png" />
<section id="eventselector">
<h4>参数 EventSelector<a class="headerlink" href="#eventselector" title="此标题的永久链接"></a></h4>
<p>设置必须保存的事件。</p>
<ul class="simple">
<li><dl class="simple">
<dt>All</dt><dd><ul>
<li><p>All events are saved</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>PileUp</dt><dd><ul>
<li><p>Only pileup events are saved</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>EnergySkim</dt><dd><ul>
<li><p>Save only the events in the Energy Skim range</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="waveselector">
<h4>参数 WaveSelector<a class="headerlink" href="#waveselector" title="此标题的永久链接"></a></h4>
<p>设置必须保存的波形。</p>
<ul class="simple">
<li><dl class="simple">
<dt>All</dt><dd><ul>
<li><p>All waves are saved</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>PileUp</dt><dd><ul>
<li><p>Only pileup waves are saved</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>EnergySkim</dt><dd><ul>
<li><p>Save only waves in the Energy Skim range</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="energyskimlowdiscriminator">
<h4>参数 EnergySkimLowDiscriminator<a class="headerlink" href="#energyskimlowdiscriminator" title="此标题的永久链接"></a></h4>
<p>允许标记能量高于低舍弃阈值的事件。16位。</p>
</section>
<section id="energyskimhighdiscriminator">
<h4>参数 EnergySkimHighDiscriminator<a class="headerlink" href="#energyskimhighdiscriminator" title="此标题的永久链接"></a></h4>
<p>允许标记能量低于高舍弃阈值的事件。16位。</p>
</section>
<section id="wavesaving">
<h4>参数 WaveSaving<a class="headerlink" href="#wavesaving" title="此标题的永久链接"></a></h4>
<p>允许始终保存波形或仅根据请求保存波形。</p>
<ul class="simple">
<li><dl class="simple">
<dt>Always</dt><dd><ul>
<li><p>Waveforms are always saved</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>OnRequest</dt><dd><ul>
<li><p>Waveforms are saved on request</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="endatareduction">
<h4>参数 EnDataReduction<a class="headerlink" href="#endatareduction" title="此标题的永久链接"></a></h4>
<p>如果启用，2 个 words 压缩为一个 word 事件。</p>
</section>
</section>
<section id="id6">
<h3>PSD 时间参数<a class="headerlink" href="#id6" title="此标题的永久链接"></a></h3>
<img alt="../_images/psd_basic_psdt.png" src="../_images/psd_basic_psdt.png" />
<section id="smoothingfactor">
<h4>参数 SmoothingFactor<a class="headerlink" href="#smoothingfactor" title="此标题的永久链接"></a></h4>
<p>平滑是一个移动平均滤波，其中输入样本被前 n 个样本的平均值代替，其中 n 是：2、4、8 和 16 个样本。启用时（请参见TriggerSmoothing），触发器将应用于平滑的采样，从而减少对噪声的触发。CFD 和 LED 触发模式均可用于平滑输入。根据ChargeSmoothing 参数，在输入样本和/或平滑样本上执行电荷积分。</p>
<ul class="simple">
<li><dl class="simple">
<dt>1</dt><dd><ul>
<li><p>Smoothing is disabled.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>2</dt><dd><ul>
<li><p>Smoothing is done averaging 2 samples.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>4</dt><dd><ul>
<li><p>Smoothing is done averaging 4 samples.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>8</dt><dd><ul>
<li><p>Smoothing is done averaging 8 samples.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>16</dt><dd><ul>
<li><p>Smoothing is done averaging 16 samples.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<img alt="../_images/smoothing_factor.png" src="../_images/smoothing_factor.png" />
</section>
<section id="triggersmoothing">
<h4>参数 TriggerSmoothing<a class="headerlink" href="#triggersmoothing" title="此标题的永久链接"></a></h4>
<p>启用/禁用触发滤波的平滑因子。</p>
<ul class="simple">
<li><dl class="simple">
<dt>Enabled</dt><dd><ul>
<li><p>Smoothing factor is enabled for the time filter.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>Smoothing factor is disabled for the time filter.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="triggerselection">
<h4>参数 TriggerSelection<a class="headerlink" href="#triggerselection" title="此标题的永久链接"></a></h4>
<p>允许用户根据两种算法选择脉冲：前沿，即当脉冲样本超过可编程阈值时识别脉冲，或者通过数字恒比甄别来获得更好的定时信息。在这两种情况下，一旦选择了事件，信号就会延迟可编程数量的样本（对应于以ns为单位的“预触发”值），以便能够在触发之前对脉冲进行积分（“预门”）。用于电荷积分的门然后在信号之前由电荷累加器产生和接收。当门有效时，基线保持冻结，采用之前最后的平均值，其值用作电荷积分参考。在可编程“再触发保护”（请参阅 RetriggerGuard）值的整个持续时间内，其他触发信号被禁止。建议设置与信号宽度兼容的触发保持值。基线在整个触发暂停持续时间内保持冻结状态。</p>
<ul class="simple">
<li><dl class="simple">
<dt>LeadingEdge</dt><dd><ul>
<li><p>Set the Leading Edge discriminator</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>CFD</dt><dd><ul>
<li><p>Set the Constant Fraction discriminator</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="cfddelay">
<h4>参数 CFDDelay<a class="headerlink" href="#cfddelay" title="此标题的永久链接"></a></h4>
<p>discriminates events based on a CFD signal. The digital CFD signal has been implemented in the classical way except for the input signal inversion. The input waveform is first inverted, then attenuated by a factor f equal to the desired timing fraction (see CFDFraction) of full amplitude, then the signal is inverted again and delayed by a time d equal to the time it takes the pulse to rise from the constant fraction level to the pulse peak; the latest two signals are summed to produce a bipolar pulse, the CFD, and its zero crossing – corresponding to the fraction f of the input pulse – is taken as the trigger time.</p>
<p>The delay of the CFD signal can be defined by the user. The TriggerThreshold is then referred to the CFD itself, and the threshold crossing arms the event selection. The trigger fires at the zero crossing of the derivative signal itself.</p>
<img alt="../_images/cfd_delay.png" src="../_images/cfd_delay.png" />
</section>
<section id="cfdfraction">
<h4>参数 CFDFraction<a class="headerlink" href="#cfdfraction" title="此标题的永久链接"></a></h4>
<ul class="simple">
<li><dl class="simple">
<dt>25</dt><dd><ul>
<li><p>25%</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>50</dt><dd><ul>
<li><p>50%</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>75</dt><dd><ul>
<li><p>75%</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>100</dt><dd><ul>
<li><p>100%</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="retriggerguard">
<h4>参数 RetriggerGuard<a class="headerlink" href="#retriggerguard" title="此标题的永久链接"></a></h4>
<p>在诸如来自 PMT 的快速信号的情况下，可能发生快甄别信号中的可能过冲，从而导致再触发，从而可能出现伪堆积。此参数允许设置再触发禁止保护（单位为 ns）。</p>
</section>
<section id="triggerhysteresis">
<h4>参数 TriggerHysteresis<a class="headerlink" href="#triggerhysteresis" title="此标题的永久链接"></a></h4>
<p>当输入信号不再超过阈值时，可能会在脉冲尾部再次触发，尤其是在尾部包含尖峰或噪声的情况下。“触发滞后”功能禁止任何触发，直到输入脉冲达到阈值本身的一半。此参数允许启用/禁用触发滞后机制。</p>
<ul class="simple">
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>Trigger hysteresis mechanism is disabled.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Enabled</dt><dd><ul>
<li><p>Trigger hysteresis mechanism is enabled.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<img alt="../_images/trigger_hysterisis.png" src="../_images/trigger_hysterisis.png" />
</section>
<section id="pileupgap">
<h4>参数 PileupGap<a class="headerlink" href="#pileupgap" title="此标题的永久链接"></a></h4>
<p>PSD 固件主要用于处理快信号，如来自与光电倍增管耦合的闪烁探测器的信号。相关输出信号不像电荷敏感前置放大器那样显示出长的衰减尾，并且两个脉冲之间堆积的概率非常低。特别是，第二个脉冲位于前一个脉冲的指数尾部的情况相当罕见。然而，使用 PSD 算法，分离闪烁探测器发射的光的快分量和慢分量是很重要的。通常，快成分是快速脉冲（几十 ns），而慢成分是相当长的尾部（通常为几 μs），其幅度远小于快成分。为了在脉冲形状甄别中获得最佳结果，有必要将“长门”设置为慢成分的整个持续时间。在这些条件下，堆积事件很可能发生在长门期间，并导致慢成分电荷计算错误。因此，发现这些事件很重要。在PSD 固件中，当同一门内出现峰-谷-峰的情况时，两个事件被视为堆积事件，其中谷和峰之间的间隙是可编程值。当达到峰值时，算法评估与 PileupGap（PUR-GAP）值相对应的点，并准备检测堆积事件（pile-up ARMED）。如果存在“谷”条件，并且输入信号超过 PUR-GAP 阈值，则该事件被标记为堆积。在默认配置中，固件不采取任何操作，事件的总电荷在门内进行评估并保存到内存中。</p>
<p>此参数允许设置峰值间隙以识别堆积。</p>
<img alt="../_images/pileup_gap.png" src="../_images/pileup_gap.png" />
</section>
</section>
<section id="id7">
<h3>PSD 能量参数<a class="headerlink" href="#id7" title="此标题的永久链接"></a></h3>
<img alt="../_images/psd_basic_psde.png" src="../_images/psd_basic_psde.png" />
<section id="baselineavg">
<h4>参数 BaselineAvg<a class="headerlink" href="#baselineavg" title="此标题的永久链接"></a></h4>
<p>数字化模块连续接收输入信号并将其数字化。可以在 ADC 尺度中调整信号基线的位置，使用 DCOffset 参数来利用模块的全部动态范围。基线值是 PSD 固件的一个重要参数，因为其值用作输入脉冲电荷积分的参考值。此外，大多数 DPP 参数与基线值有关，如触发阈值。用户可以设置基线的固定值，也可以让 DPP 固件动态计算。在第一种情况下，用户必须通过选项 Fixed 以 LSB 为单位设置基线值。该值在整个采集运行中保持固定。在后一种情况下，固件动态地将基线评估为移动时间窗口内的 N 个点的平均值。用户可以选择下面列出的选项之一，每个选项对应于预定义数量的样本。然后，从门启动前的几个时钟开始冻结基线，直到长门和触发保持(trigger hold-off)之间的最大值结束（请参阅 GateLongLength 和 RetriggerGuard）。此参数允许设置用于平均能量滤波基线的样本数。</p>
<ul class="simple">
<li><dl class="simple">
<dt>Fixed</dt><dd><ul>
<li><p>Baseline fixed at AbsoluteBaseline value</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Low</dt><dd><ul>
<li><p>Baseline samples for average = 16</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>MediumLow</dt><dd><ul>
<li><p>Baseline samples for average = 64</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>MediumHigh</dt><dd><ul>
<li><p>Baseline samples for average = 256</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>High</dt><dd><ul>
<li><p>Baseline samples for average = 1024</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<img alt="../_images/adc_input_baseline_avg.png" src="../_images/adc_input_baseline_avg.png" />
</section>
<section id="absolutebl">
<h4>参数 AbsoluteBL<a class="headerlink" href="#absolutebl" title="此标题的永久链接"></a></h4>
<p>ADCInput 信号基线的绝对值。</p>
<p>单位为 ADC 道址。</p>
</section>
<section id="blguard">
<h4>参数 BLGuard<a class="headerlink" href="#blguard" title="此标题的永久链接"></a></h4>
<p>积分门前的能量滤波基线评估保护（ns）。</p>
</section>
<section id="chargesmoothing">
<h4>参数 ChargeSmoothing<a class="headerlink" href="#chargesmoothing" title="此标题的永久链接"></a></h4>
<p>启用/禁用电荷评估的平滑因子。</p>
<ul class="simple">
<li><dl class="simple">
<dt>Enabled</dt><dd><ul>
<li><p>Smoothing factor is enabled in the charge evaluation</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>Smoothing factor is disabled in the charge evaluation</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="shortgate">
<h4>参数 ShortGate<a class="headerlink" href="#shortgate" title="此标题的永久链接"></a></h4>
<p>此参数允许设置短门长度。</p>
<p>单位 ns。</p>
</section>
<section id="longgate">
<h4>参数 LongGate<a class="headerlink" href="#longgate" title="此标题的永久链接"></a></h4>
<p>PSD 固件的目的是对输入信号进行电荷积分，并计算对输入（Qshort和Qlong）进行双门积分的 PSD 因子。下图显示了两个不同形状信号的短门和长门位置。</p>
<p>单位 ns。</p>
<img alt="../_images/long_short_gate.png" src="../_images/long_short_gate.png" />
</section>
<section id="offsetgate">
<h4>参数 OffsetGate<a class="headerlink" href="#offsetgate" title="此标题的永久链接"></a></h4>
<p>此参数允许设置相对于触发信号的门偏置。</p>
<p>单位 ns。</p>
</section>
<section id="longpedestal">
<h4>参数 LongPedestal<a class="headerlink" href="#longpedestal" title="此标题的永久链接"></a></h4>
<p>此参数允许设置长电荷积分 pedestal。这一特性在能量接近零的情况下非常有用。</p>
</section>
<section id="shortpedestal">
<h4>参数 ShortPedestal<a class="headerlink" href="#shortpedestal" title="此标题的永久链接"></a></h4>
<p>此参数允许设置短电荷积分 pedestal。这一特性在能量接近零的情况下非常有用。</p>
</section>
<section id="energygain">
<h4>参数 EnergyGain<a class="headerlink" href="#energygain" title="此标题的永久链接"></a></h4>
<p>此参数允许设置能量增益，即重新缩放信号电荷。</p>
<ul class="simple">
<li><dl class="simple">
<dt>x1</dt><dd><ul>
<li><p>Charge value is multiplied x1.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>x4</dt><dd><ul>
<li><p>Charge value is multiplied x4.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>x16</dt><dd><ul>
<li><p>Charge value is multiplied x16.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>x64</dt><dd><ul>
<li><p>Charge value is multiplied x64.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>x256</dt><dd><ul>
<li><p>Charge value is multiplied x256.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="neutronthr">
<h4>参数 NeutronThr<a class="headerlink" href="#neutronthr" title="此标题的永久链接"></a></h4>
<p>此参数允许设置中子甄别的中子能量阈值。固件将“长能量”-“短能量”之差（即长门和短门中的电荷积分之间的差）与该参数设置的阈值进行比较，以决定是否拒绝该事件。参考下图所示的中子/伽马甄别示例，PSD 上的切口允许用户拒绝大多数伽马事件，从而只记录中子和与中子重叠的少量伽马。</p>
<img alt="../_images/neutron_threshold.png" src="../_images/neutron_threshold.png" />
</section>
<section id="eventreject">
<h4>参数 EventReject<a class="headerlink" href="#eventreject" title="此标题的永久链接"></a></h4>
<p>启用事件的中子抑制。参见 NeutronThreshold 参数</p>
<ul class="simple">
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>Neutron rejection for events is disabled.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Enabled</dt><dd><ul>
<li><p>Neutron rejection for events is enabled.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="wavereject">
<h4>参数 WaveReject<a class="headerlink" href="#wavereject" title="此标题的永久链接"></a></h4>
<p>启用波形的中子抑制。参见 NeutronThreshold 参数</p>
<ul class="simple">
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>Neutron rejection for waves is disabled.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Enabled</dt><dd><ul>
<li><p>Neutron rejection for waves is enabled.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="id8">
<h3>诊断<a class="headerlink" href="#id8" title="此标题的永久链接"></a></h3>
<img alt="../_images/psd_basic_debug.png" src="../_images/psd_basic_debug.png" />
<section id="testpulseperiod">
<h4>参数 TestPulsePeriod<a class="headerlink" href="#testpulseperiod" title="此标题的永久链接"></a></h4>
<p>测试脉冲是一种可编程方波，可用作内部周期性触发器（主要用于测试目的）或在 TRGOUT 和 GPIO 输出上生成逻辑测试脉冲（TTL 或 NIM）。此参数设置测试脉冲的周期。</p>
<p>单位为时间，ns</p>
</section>
<section id="testpulsewidth">
<h4>参数 TestPulseWidth<a class="headerlink" href="#testpulsewidth" title="此标题的永久链接"></a></h4>
<p>测试脉冲的宽度（信号保持高电平的时间）。</p>
<p>单位为时间，ns</p>
</section>
<section id="testpulselowlevel">
<h4>参数 TestPulseLowLevel<a class="headerlink" href="#testpulselowlevel" title="此标题的永久链接"></a></h4>
<p>以 ADC 道址表示的测试脉冲低电平</p>
</section>
<section id="testpulsehighlevel">
<h4>参数 TestPulseHighLevel<a class="headerlink" href="#testpulsehighlevel" title="此标题的永久链接"></a></h4>
<p>以 ADC 道址表示的测试脉冲高电平</p>
</section>
<section id="dacoutmode">
<h4>参数 DACoutMode<a class="headerlink" href="#dacoutmode" title="此标题的永久链接"></a></h4>
<p>选择要在前面板 DAC LEMO口输出发送的信号类型。</p>
<ul class="simple">
<li><dl class="simple">
<dt>Static</dt><dd><ul>
<li><p>DAC output stays at a fixed level, given by the DACoutStaticLevel parameter</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Ramp</dt><dd><ul>
<li><p>The DAC output is driven by a 14-bit counter</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Sin5MHz</dt><dd><ul>
<li><p>The DAC output is a sine wave at 5 MHz with fixed amplitude</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Square</dt><dd><ul>
<li><p>Square wave with period and with set by TestPulsePeriod and TestPulseWidth and amplitude between TestPulseLoweLevel and TestPulseHighLevel.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>IPE</dt><dd><ul>
<li><p>Not implemented</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ChInput</dt><dd><ul>
<li><p>The DAC reproduces the input signal received by one input channel, selected by the DACoutChSelect parameter</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>MemOccupancy</dt><dd><ul>
<li><p>Level of the memory occupancy (not yet implemented)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ChSum</dt><dd><ul>
<li><p>The DAC reproduces the “analog” sum of all the digitizer inputs (not yet implemented)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>OverThrSum</dt><dd><ul>
<li><p>The DAC output is proportional to the number of channels that are currently above the threshold</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="dacoutstaticlevel">
<h4>参数 DACoutStaticLevel<a class="headerlink" href="#dacoutstaticlevel" title="此标题的永久链接"></a></h4>
<p>当 DACoutMode = Static 时，此参数设置 DAC 输出的 14 位电平。</p>
</section>
<section id="dacoutchselect">
<h4>参数 DACoutChSelect<a class="headerlink" href="#dacoutchselect" title="此标题的永久链接"></a></h4>
<p>当 DACoutMode = ChInput 时，DAC 输出由该参数选择的通道的输入信号。</p>
</section>
</section>
</section>
<section id="id9">
<h2>逻辑参数配置<a class="headerlink" href="#id9" title="此标题的永久链接"></a></h2>
<section id="id10">
<h3>运行<a class="headerlink" href="#id10" title="此标题的永久链接"></a></h3>
<img alt="../_images/psd_logic_run.png" src="../_images/psd_logic_run.png" />
<section id="startsource">
<h4>参数 StartSource<a class="headerlink" href="#startsource" title="此标题的永久链接"></a></h4>
<p>Defines the source for the start of run. Multiple options are allowed, separated by “|”.</p>
<ul class="simple">
<li><dl class="simple">
<dt>EncodedClkIn</dt><dd><ul>
<li><p>Start from CLK-IN/SYNC connector on the front panel. This is a 4-pin connector (LVDS signals) used to propagate the reference clock (typ. 62.5 MHz) and a Sync signal. The rising edge of the Sync starts the acquisition, that lasts until the Sync returns low (falling edge).</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SINlevel</dt><dd><ul>
<li><p>Start from SIN (1=run, 0=stop)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SINedge</dt><dd><ul>
<li><p>Start from SIN (rising edge = run; stop from SW)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SWcmd</dt><dd><ul>
<li><p>Start from SW</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>LVDS</dt><dd><ul>
<li><p>Start from LVDS</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>P0</dt><dd><ul>
<li><p>Start from P0 (backplane)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="globaltriggersource">
<h4>参数 GlobalTriggerSource<a class="headerlink" href="#globaltriggersource" title="此标题的永久链接"></a></h4>
<p>Defines the source for the Acquisition Trigger, which is the signal that opens the acquisition window and saves the waveforms in the memory buffers. Multiple options are allowed, separated by “|”.</p>
<ul class="simple">
<li><dl class="simple">
<dt>TrgIn</dt><dd><ul>
<li><p>Front Panel TRGIN</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>P0</dt><dd><ul>
<li><p>Trigger from P0 (backplane)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SwTrg</dt><dd><ul>
<li><p>Software trigger</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>LVDS</dt><dd><ul>
<li><p>LVDS trgin</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLA</dt><dd><ul>
<li><p>Internal Trigger Logic A: combination of channel self-triggers</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLB</dt><dd><ul>
<li><p>Internal Trigger Logic B: combination of channel self-triggers</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLA_AND_ITLB</dt><dd><ul>
<li><p>Second level Trigger logic making the AND of ITL A and B</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLA_OR_ITLB</dt><dd><ul>
<li><p>Second level Trigger logic making the OR of ITL A and B</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>EncodedClkIn</dt><dd><ul>
<li><p>Not implemented (encoded CLK-IN trigger)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>GPIO</dt><dd><ul>
<li><p>Front Panel GPIO</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TestPulse</dt><dd><ul>
<li><p>Internal Test Pulse</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>UserTrg</dt><dd><ul>
<li><p>User custom trigger source</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="enautodisarmacq">
<h4>参数 EnAutoDisarmAcq<a class="headerlink" href="#enautodisarmacq" title="此标题的永久链接"></a></h4>
<p>When enabled, the Auto Disarm option disarms the acquisition at the stop of run. When the start of run is controlled by an external signal, this option prevents the digitizer to restart without the intervention of the software.</p>
<ul class="simple">
<li><dl class="simple">
<dt>True</dt><dd><ul>
<li><p>The acquisition is automatically disarmed after the stop. It is therefore necessary to rearm the digitizer (with the relevant command sent by the software) before starting a new run.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>False</dt><dd><ul>
<li><p>The acquisition is not disarmed after the stop. Multiple transition of the start signal will produce multiple runs.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="rundelay">
<h4>参数 RunDelay<a class="headerlink" href="#rundelay" title="此标题的永久链接"></a></h4>
<p>When the start of run is controlled by a RUN signal that is propagated in daisy chain between the boards (for instance through the ClkIn- ClkOut or SIN-GPIO sync chain), it is necessary to compensate for the propagation delay and let the boards start exactly at the same time. The RunDelay parameter allows the start of the acquisition to be delayed by a given number of clock cycles with respect to the rising edge of the RUN signal. Assuming that the propagation delay is 2 cycles, the RunDelay setting will be 0 for the last board in the chain, 2 for the previous one, and so on up 2x(NB-1) for the first one.</p>
<p>Unit of Measure: ns</p>
</section>
<section id="busyinsource">
<h4>参数 BusyInSource<a class="headerlink" href="#busyinsource" title="此标题的永久链接"></a></h4>
<p>In a multi-board system, it might be necessary to prevent one board to accept a new trigger while another board is full and thus unable to accept the same trigger. For this reason, each board can generate a Busy signal to notify that it is unable to get a new trigger. If the busy/veto mechanism has some latency, it is advisable to generate the busy slightly before the digitizer become full. For this purpose, it is possible to assert the busy output when the acquisition memory reaches a certain level of occupancy (internally managed). The OR of the busy signals is typically used to stop the global trigger. It is possible to get the individual busy signals from each board and make an external OR logic or connect the boards with cables to propagate the Busy along the chain. Each board makes an OR between its internal busy and the busy input signal coming from the previous board, thus having a global Busy at the end of the line. This parameter defines the source of the Busy Input (schematized in the figure below)</p>
<img alt="../_images/busyinsource.png" src="../_images/busyinsource.png" />
<ul class="simple">
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>The Busy is given by the Internal Busy only (Memory full or almost full)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SIN</dt><dd><ul>
<li><p>Busy input from SIN on front panel</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>GPIO</dt><dd><ul>
<li><p>Busy input coming from GPIO on front panel, used as a simple input. It is also possible to use GPIO as a wired OR (bidirectional). In this mode, the Busy line goes high as soon as one board drives it high. All the boards can read the Busy line and use it as a veto for the trigger</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>LVDS</dt><dd><ul>
<li><p>LVDS trgin</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="clocksource">
<h4>参数 ClockSource<a class="headerlink" href="#clocksource" title="此标题的永久链接"></a></h4>
<p>This is the source of the system clock. Multiple options are not allowed</p>
<ul class="simple">
<li><dl class="simple">
<dt>Internal</dt><dd><ul>
<li><p>Local oscillator, 62.5 MHz</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>FPClkIn</dt><dd><ul>
<li><p>Front Panel Clock input</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="enclockoutfp">
<h4>参数 EnClockOutFP<a class="headerlink" href="#enclockoutfp" title="此标题的永久链接"></a></h4>
<p>Enables clock output on Front Panel for the daisy chain propagation of the clock between multiple boards.</p>
<ul class="simple">
<li><dl class="simple">
<dt>True</dt><dd><ul>
<li><p>Enabled</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>False</dt><dd><ul>
<li><p>Disabled</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="id11">
<h3>模块前面板<a class="headerlink" href="#id11" title="此标题的永久链接"></a></h3>
<img alt="../_images/psd_logic_frontpanel.png" src="../_images/psd_logic_frontpanel.png" />
<section id="trgoutmode">
<h4>参数 TrgOutMode<a class="headerlink" href="#trgoutmode" title="此标题的永久链接"></a></h4>
<p>Selects the signal that is routed to the TRGOUT output. Multiple options are not allowed.</p>
<ul class="simple">
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>TRGOUT output disabled</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TrgIn</dt><dd><ul>
<li><p>Propagation of Front Panel TRGIN (TRGOUT is a replica, with some delay, of the TRGIN signal)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>P0</dt><dd><ul>
<li><p>Propagation of P0 trigger</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SwTrg</dt><dd><ul>
<li><p>Software trigger</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>LVDS</dt><dd><ul>
<li><p>LVDS trgin</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLA</dt><dd><ul>
<li><p>Internal Trigger Logic A: combination of channel self-triggers</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLB</dt><dd><ul>
<li><p>Internal Trigger Logic B: combination of channel self-triggers</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLA_AND_ITLB</dt><dd><ul>
<li><p>Second level Trigger logic making the AND of ITL A and B</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLA_OR_ITLB</dt><dd><ul>
<li><p>Second level Trigger logic making the OR of ITL A and B</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>EncodedClkIn</dt><dd><ul>
<li><p>Not implemented (propagation of the Encoded CLK-IN trigger)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Run</dt><dd><ul>
<li><p>Propagation of the RUN signal (acquisition start/stop), before applying the delay given by the RunDelay parameter</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>RefClk</dt><dd><ul>
<li><p>Monitor of the 62.5 MHz clock (used for phase alignment)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TestPulse</dt><dd><ul>
<li><p>Internal Test Pulse</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Busy</dt><dd><ul>
<li><p>Busy of the board</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>UserTrgout</dt><dd><ul>
<li><p>Trgout coming from the User Logic (open FPGA)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Fixed0</dt><dd><ul>
<li><p>0 level signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Fixed1</dt><dd><ul>
<li><p>1 level signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SyncIn</dt><dd><ul>
<li><p>SyncIn signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SIN</dt><dd><ul>
<li><p>SIN connector signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>GPIO</dt><dd><ul>
<li><p>GPIO connector signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>LBinClk</dt><dd><ul>
<li><p>Internal Logic B clock signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>AcceptTrg</dt><dd><ul>
<li><p>Accepted triggers signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TrgClk</dt><dd><ul>
<li><p>Tigger clock signal</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="gpiomode">
<h4>参数 GPIOMode<a class="headerlink" href="#gpiomode" title="此标题的永久链接"></a></h4>
<p>Selects the signal that is routed to the GPIO, when this is used as output. Multiple options are not allowed. The GPIO on the front panel is a bidirectional signal that can used in three different ways:</p>
<blockquote>
<div><p>As independent board output (each board drives its own GPIO)</p>
<p>As a shared input for the boards: the signal is driven high (= 1) or low (= 0) by an external source and connected in “short circuit” among multiple boards using “T” connectors at the inputs. The GPIO is not internally terminated, thus it is necessary to put a 50 Ohm terminator at the end of the line (last “T”of the chain)</p>
<p>As a shared bidirectional line, making a “wired OR”. One or more boards can simultaneously drive the signal high (= 1). If no board drives the GPIO, it remains low (= 0). All boards can read back the signal. It is necessary to put a 50 Ohm terminator at both ends of the line (first and last “T” of the chain). This mode can be used to generate, for instance, the global Busy and Veto logic for multiple boards.</p>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>GPIO disabled</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TrgIn</dt><dd><ul>
<li><p>Propagation of Front Panel TRGIN (GPIO is a replica, with some delay, of the TRGIN signal)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>P0</dt><dd><ul>
<li><p>Propagation of P0 trigger</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SIN</dt><dd><ul>
<li><p>Propagation of SIN</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>LVDS</dt><dd><ul>
<li><p>LVDS trgin</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLA</dt><dd><ul>
<li><p>Internal Trigger Logic A: combination of channel self-triggers</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLB</dt><dd><ul>
<li><p>Internal Trigger Logic B: combination of channel self-triggers</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLA_AND_ITLB</dt><dd><ul>
<li><p>Second level Trigger logic making the AND of ITL A and B</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLA_OR_ITLB</dt><dd><ul>
<li><p>Second level Trigger logic making the OR of ITL A and B</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>EncodedClkIn</dt><dd><ul>
<li><p>Not implemented (propagation of the Encoded CLK-IN trigger)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SwTrg</dt><dd><ul>
<li><p>Software trigger</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Run</dt><dd><ul>
<li><p>Propagation of RUN</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>RefClk</dt><dd><ul>
<li><p>Monitor of the 62.5 MHz clock (used for phase alignment)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TestPulse</dt><dd><ul>
<li><p>Internal Test Pulse</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Busy</dt><dd><ul>
<li><p>Busy of the board</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>UserGPO</dt><dd><ul>
<li><p>GPO coming from the User Logic (open FPGA)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Fixed0</dt><dd><ul>
<li><p>0 level signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Fixed1</dt><dd><ul>
<li><p>1 level signal</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="syncoutmode">
<h4>参数 SyncOutMode<a class="headerlink" href="#syncoutmode" title="此标题的永久链接"></a></h4>
<p>In a multi-board system, it can be useful to propagate a synchronous signal together with the clock (to synchronize the start of the run, for example) on CLK OUT front panel connector. This parameter defines which signal must be sent out. Multiple options are not allowed.</p>
<ul class="simple">
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>SyncoutMode is disabled</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SyncIn</dt><dd><ul>
<li><p>SyncIn signal (if provided with clkIn on CLK IN connector)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TestPulse</dt><dd><ul>
<li><p>Internal Test Pulse</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>IntClk</dt><dd><ul>
<li><p>Internal 62.5 MHz clock (for test purposes)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Run</dt><dd><ul>
<li><p>Propagation of RUN signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>User</dt><dd><ul>
<li><p>User customSyncoutMode</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="iolevel">
<h4>参数 IOlevel<a class="headerlink" href="#iolevel" title="此标题的永久链接"></a></h4>
<p>Sets the electrical logic level of the LEMO I/Os (TRGIN, SIN, TRGOUT, GPIO).</p>
<p>Note that TRGIN and SIN are internally terminated to 50 Ohm, while GPIO and TRGOUT require the termination to 50 Ohms at the receiver</p>
<ul class="simple">
<li><dl class="simple">
<dt>NIM</dt><dd><ul>
<li><p>NIM logic (0 = 0V, 1 = -0.8V, that is -16mA)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TTL</dt><dd><ul>
<li><p>Low Voltage TLL logic (0 = 0V, 1 = 3.3V)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="lvdsdirection">
<h4>参数 LVDSDirection<a class="headerlink" href="#lvdsdirection" title="此标题的永久链接"></a></h4>
<p>Assigns the direction to a quartet of LVDS I/Os.</p>
<ul class="simple">
<li><dl class="simple">
<dt>Input</dt><dd><ul>
<li><p>The LVDS lines of the relevant quartet are used as input. The relevant LED on the front panel is OFF.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Output</dt><dd><ul>
<li><p>The LVDS lines of the relevant quartet are used as output. The relevant LED on the front panel lights-up.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="lvdsmode">
<h4>参数 LVDSMode<a class="headerlink" href="#lvdsmode" title="此标题的永久链接"></a></h4>
<p>The digitizer is equipped with 16 LVDS I/Os that can be programmed to be inputs or outputs by groups of 4 (quartets), depending on the LVDSDirection parameter. Once the direction has been selected, it is possible to select the functionality of the LVDS lines, individually for each quartet.</p>
<ul class="simple">
<li><dl class="simple">
<dt>SelfTriggers</dt><dd><ul>
<li><p>This option is available only when the LVDS are set as outputs. Each LVDS line can be assigned to a combination of the 64 self-triggers, implemented as a masked OR, where the mask is set by the LVDSTrgMask parameter(16 independent masks, one per LVDS line)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Sync</dt><dd><ul>
<li><p>Whatever is the direction of the quartet, the 4 lines are rigidly assigned to specific acquisition signals: 0 = Run 1 = Trigger 2 = Busy 3= Veto It is possible to implement a daisy chain distribution of these signals using one quartet as input and another one as output</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>IORegister</dt><dd><ul>
<li><p>The LVDS lines of the quartet are statically controlled by the LVDSIOReg parameter. Use the SetValue function to set the relevant LVDS lines when programmed as output. Use GetValue to read the status of the LVDS lines when programmed as inputs.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>User</dt><dd><ul>
<li><p>User custom.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="lvdstrgmask">
<h4>参数 LVDSTrgMask<a class="headerlink" href="#lvdstrgmask" title="此标题的永久链接"></a></h4>
<p>Each LVDS line can be assigned to a combination of the 64 self-triggers, implemented as a masked OR, where the mask is set by this parameter. There are 16 independent masks, one per LVDS line. Note that the trigger mask assignment does not imply the LVDS direction and mode settings. It is therefore necessary to set the Direction = Output and Mode = SelfTriggers to use the Self-Trigger propagation to the LVDS I/Os.</p>
</section>
<section id="lvdsioreg">
<h4>参数 LVDSIOReg<a class="headerlink" href="#lvdsioreg" title="此标题的永久链接"></a></h4>
<p>Set the status of the LVDS I/O for the quartets when they are programmed to be output and Mode = IORegister. This parameter reads out the status of the quartets in the case the LVDS I/O are programmed as inputs (possibly externally driven).</p>
</section>
</section>
<section id="id12">
<h3>反符合<a class="headerlink" href="#id12" title="此标题的永久链接"></a></h3>
<img alt="../_images/psd_logic_veto.png" src="../_images/psd_logic_veto.png" />
<section id="channelvetosource">
<h4>参数 ChannelVetoSource<a class="headerlink" href="#channelvetosource" title="此标题的永久链接"></a></h4>
<p>Allows to set the veto for each channel; it can be external (which means one of the veto options in the previous table), or it can be on a channel base.</p>
<ul class="simple">
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>Any channel veto source is disabled</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>BoardVeto</dt><dd><ul>
<li><p>Enables board veto</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>ADCOverSaturation: Enables veto due to ADC oversaturation</p></li>
<li><p>ADCUnderSaturation: Enables veto due to ADC undersaturation</p></li>
</ul>
</section>
<section id="adcvetowidth">
<h4>参数 ADCVetoWidth<a class="headerlink" href="#adcvetowidth" title="此标题的永久链接"></a></h4>
<p>It is the width of the ADC veto (undersaturation and oversaturation width) expressed in ns.</p>
<p>Unit of Measure: ns</p>
</section>
<section id="vetosource">
<h4>参数 VetoSource<a class="headerlink" href="#vetosource" title="此标题的永久链接"></a></h4>
<p>Defines the source for the Veto, which is the signal that inhibits the acquisition trigger. Multiple options are allowed, separated by “|”. The VETO signal can be either active high or low, depending on the VetoPolarity parameter. When active low, it acts as a GATE for the trigger. It is possible to stretch the duration of the VETO by means of the parameter VetoWidth.</p>
<ul class="simple">
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>VETO is always OFF</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SIN</dt><dd><ul>
<li><p>SIN on the front panel</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>GPIO</dt><dd><ul>
<li><p>GPIO on the front panel (used as input)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>LVDS</dt><dd><ul>
<li><p>LVDS trgin</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>P0</dt><dd><ul>
<li><p>P0 (signal from the backplane)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>EncodedClkIn</dt><dd><ul>
<li><p>Not implemented (encoded CLK-IN veto)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="vetowidth">
<h4>参数 VetoWidth<a class="headerlink" href="#vetowidth" title="此标题的永久链接"></a></h4>
<p>Whatever is the source of the VETO signal, it is possible to stretch the duration of the veto up to a given time by means of a re-triggerable monostable. When 0, the monostable is disabled and the veto lasts as long as the selected source is active.</p>
<p>Unit of Measure: ns</p>
</section>
<section id="vetopolarity">
<h4>参数 VetoPolarity<a class="headerlink" href="#vetopolarity" title="此标题的永久链接"></a></h4>
<p>Defines the polarity of the Veto</p>
<ul class="simple">
<li><dl class="simple">
<dt>ActiveHigh</dt><dd><ul>
<li><p>Veto is active high. The signal acts as an “Inhibit” for the trigger</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ActiveLow</dt><dd><ul>
<li><p>Veto is active low. The signal acts as a “Gate” the trigger</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="itl">
<h3>ITL 逻辑<a class="headerlink" href="#itl" title="此标题的永久链接"></a></h3>
<img alt="../_images/psd_logic_itl.png" src="../_images/psd_logic_itl.png" />
<img alt="../_images/logic_diagram.png" src="../_images/logic_diagram.png" />
<section id="itla-bmask">
<h4>参数 ITLA/BMask<a class="headerlink" href="#itla-bmask" title="此标题的永久链接"></a></h4>
<p>Enable Mask at the input of the ITLA/B.</p>
</section>
<section id="itla-bpairlogic">
<h4>参数 ITLA/BPairLogic<a class="headerlink" href="#itla-bpairlogic" title="此标题的永久链接"></a></h4>
<p>Pairs of channels can be combined with an OR or AND before feeding in the Main trigger Logic. This is typically used in the readout of tubes or scintillator bars, where the two ends are read in coincidence, for instance in position sensitive detectors (the coincidence window will be set by the SelfTriggerWidth parameter). When the AND/OR logic is applied, the two outputs of the Pair Logic blocks are identical.</p>
<p>Note that they are counted twice in the following Majority logic. If the Pair Logic is disabled (“NONE” option), the block is transparent, and the two outputs are just a replica of the inputs.</p>
<ul class="simple">
<li><dl class="simple">
<dt>OR</dt><dd><ul>
<li><p>Both Pair Logic Outputs = OR of two consecutive self-triggers</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>AND</dt><dd><ul>
<li><p>Both Pair Logic Outputs = AND of two consecutive self-triggers</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>NONE</dt><dd><ul>
<li><p>Outputs = Inputs</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="itla-bmainlogic">
<h4>参数 ITLA/BMainLogic<a class="headerlink" href="#itla-bmainlogic" title="此标题的永久链接"></a></h4>
<p>Each channel of the digitizer feature a digital bipolar triangular filter discriminator with programmable rise time and threshold able to self-trigger on the input pulses and generate a self-trigger signal. In DPP Mode, the channels acquire independently, so the channel self-trigger is used locally to acquire a waveform. The trigger threshold is then referred to the bipolar triangular filter, and the threshold crossing arms the event selection. The trigger fires at the zero crossing of the time filter signal. The user can see the derivative trace on the signal inspector. It is also possible to combine all the self-triggers of the board, according to a specific trigger logic. There are two independent logic blocks, ITLA and ITLB. Their output can be used separately to feed, for instance, AcqTrigger and TrgOut, or combined in a second level trigger logic to implement more complex trigger schemes. Therefore, the ITLs can either generate the local acquisition trigger, common to all the channels, for the acquisition of the waveform, or propagate the signal outside, through the TRGOUT, thus making it possible to combine triggers of multiple boards in an external trigger logic, that eventually feeds back the TRGIN of the digitizers. Each ITL is made of an input enable mask (64 bits, one per channel), an optional pairing logic that combines the self triggers of two consecutive channels (e.g. paired coincidence) and the main trigger logic that combines the 64 selftriggers with an OR, AND or Majority logic. The output can be linear (no stretching) or reshaped by a programmable gate generator, either re-triggerable or not and finally programmed for polarity (direct or inverted).</p>
<ul class="simple">
<li><dl class="simple">
<dt>OR</dt><dd><ul>
<li><p>ITLOUT = masked OR of channel self-triggers</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>AND</dt><dd><ul>
<li><p>ITLOUT = masked AND of channel self-triggers</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Majority</dt><dd><ul>
<li><p>ITLOUT = masked Majority of channel self-triggers</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="itla-bmajoritylev">
<h4>参数 ITLA/BMajorityLev<a class="headerlink" href="#itla-bmajoritylev" title="此标题的永久链接"></a></h4>
<p>Defines the majority level of the Main Logic of the ITL A/B block. The majority output is calculated at every clock cycle, and it becomes TRUE when Nch &gt;= MajLev, where Nch is the number of self-triggers active in that clock cycle and MajLev is the programmed majority level.</p>
<p>Note that when the Pair Logic is used to combine the self triggers two by two (AND/OR), each pair produces two identical signals that will be counted twice in the majority level.</p>
</section>
<section id="itla-bgatewidth">
<h4>参数 ITLA/BGateWidth<a class="headerlink" href="#itla-bgatewidth" title="此标题的永久链接"></a></h4>
<p>Width of the gate generator at the output of the ITLA/B block.</p>
<p>Unit of Measure: ns</p>
</section>
<section id="itla-bpolarity">
<h4>参数 ITLA/BPolarity<a class="headerlink" href="#itla-bpolarity" title="此标题的永久链接"></a></h4>
<p>Polarity of the gate generator output.</p>
<ul class="simple">
<li><dl class="simple">
<dt>Direct</dt><dd><ul>
<li><p>Direct polarity</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Inverted</dt><dd><ul>
<li><p>Inverted polarity</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="itla-benretrigger">
<h4>参数 ITLA/BEnRetrigger<a class="headerlink" href="#itla-benretrigger" title="此标题的永久链接"></a></h4>
<p>Set the ITLA/B to be retriggerable.</p>
<ul class="simple">
<li><dl class="simple">
<dt>True</dt><dd><ul>
<li><p>The ITLA/B is retriggerable</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>False</dt><dd><ul>
<li><p>The ITLA/B is not retriggerable</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="id13">
<h3>延迟展宽<a class="headerlink" href="#id13" title="此标题的永久链接"></a></h3>
<img alt="../_images/psd_logic_mask.png" src="../_images/psd_logic_mask.png" />
<section id="itlconnect">
<h4>参数 ITLConnect<a class="headerlink" href="#itlconnect" title="此标题的永久链接"></a></h4>
<p>Alternative to ITLAMask, ITLBMask. Determines if the channel partecipate in ITLA or ITLB</p>
<ul class="simple">
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>The channel is disabled</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLA</dt><dd><ul>
<li><p>The channel participates in ITLA logic block</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLB</dt><dd><ul>
<li><p>The channel participates in ITLB logic block</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="channelstriggermask">
<h4>参数 ChannelsTriggerMask<a class="headerlink" href="#channelstriggermask" title="此标题的永久链接"></a></h4>
<p>Allows to set the mask over 64 bits to generate a channel trigger. It can be used to trigger a channel using a trigger coming from another channel. It also allows to set the mask over 64 bits to enable the channel to participate in the coincidence logic defined in CoincidenceMask and AntiCoincidenceMask (option Channel64Trg). 64-bit enable mask, each bit representing a channel.</p>
</section>
<section id="coincidencemask">
<h4>参数 CoincidenceMask<a class="headerlink" href="#coincidencemask" title="此标题的永久链接"></a></h4>
<p>Allows to set the coincidence mask that generates a trigger on the specified channel.</p>
<ul class="simple">
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>All the coincidence sources are disabled</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Ch64Trigger</dt><dd><ul>
<li><p>One of the 64 channels can generate a coincidence signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TRGIN</dt><dd><ul>
<li><p>TRGIN can generate a coincidence signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>GlobalTriggerSource</dt><dd><ul>
<li><p>Acquisition Trigger can generate a coincidence signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLA</dt><dd><ul>
<li><p>ITLA can generate a coincidence signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLB</dt><dd><ul>
<li><p>ITLB can generate a coincidence signal</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="anticoincidencemask">
<h4>参数 AntiCoincidenceMask<a class="headerlink" href="#anticoincidencemask" title="此标题的永久链接"></a></h4>
<p>Allows to set the anticoincidence mask that generates a trigger on the specified channel.</p>
<ul class="simple">
<li><dl class="simple">
<dt>Disabled</dt><dd><ul>
<li><p>All the coincidence sources are disabled</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Ch64Trigger</dt><dd><ul>
<li><p>One of the 64 channels can generate a coincidence signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TRGIN</dt><dd><ul>
<li><p>TRGIN can generate a coincidence signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>GlobalTriggerSource</dt><dd><ul>
<li><p>Acquisition Trigger can generate a coincidence signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLA</dt><dd><ul>
<li><p>ITLA can generate a coincidence signal</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ITLB</dt><dd><ul>
<li><p>ITLB can generate a coincidence signal</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="coincidencelength">
<h4>参数 CoincidenceLength<a class="headerlink" href="#coincidencelength" title="此标题的永久链接"></a></h4>
<p>Coincidence window length in nanoseconds (ns). 16-bit value.</p>
<p>Unit of Measure: ns</p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="PHA.html" class="btn btn-neutral float-left" title="PHA 固件" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="ZLE.html" class="btn btn-neutral float-right" title="ZLE 固件" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2021, Hongyi Wu(吴鸿毅)。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>